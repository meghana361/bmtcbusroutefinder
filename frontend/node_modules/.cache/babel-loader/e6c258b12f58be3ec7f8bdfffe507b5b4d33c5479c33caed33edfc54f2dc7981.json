{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RouteFinder=()=>{const[source,setSource]=useState('');const[destination,setDestination]=useState('');const[routes,setRoutes]=useState([]);const[error,setError]=useState('');const[stops,setStops]=useState([]);const[sourceSuggestions,setSourceSuggestions]=useState([]);const[destSuggestions,setDestSuggestions]=useState([]);useEffect(()=>{const fetchStops=async()=>{try{const res=await axios.get('bmtcbusroutefinder-production.up.railway.app/stops');setStops(res.data.map(stop=>stop.stop_name));}catch(err){console.error('Failed to fetch stops:',err);}};fetchStops();},[]);const handleSearch=async e=>{e.preventDefault();setRoutes([]);setError('');if(!source||!destination){setError('Please enter both source and destination.');return;}try{const response=await axios.get('bmtcbusroutefinder-production.up.railway.app/routes',{params:{source:source.trim(),destination:destination.trim()}});if(response.data.routes.length===0){setError('No routes found between the selected stops.U should take multiple stops');}else{setRoutes(response.data.routes);}}catch(err){var _err$response,_err$response$data;if((_err$response=err.response)!==null&&_err$response!==void 0&&(_err$response$data=_err$response.data)!==null&&_err$response$data!==void 0&&_err$response$data.error){setError(err.response.data.error);}else{setError('An error occurred while fetching routes.');}}};const handleSourceChange=e=>{const value=e.target.value;setSource(value);setSourceSuggestions(stops.filter(stop=>stop.toLowerCase().includes(value.toLowerCase())));};const handleDestinationChange=e=>{const value=e.target.value;setDestination(value);setDestSuggestions(stops.filter(stop=>stop.toLowerCase().includes(value.toLowerCase())));};const handleSelectSuggestion=(value,isSource)=>{if(isSource){setSource(value);setSourceSuggestions([]);}else{setDestination(value);setDestSuggestions([]);}};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',maxWidth:'500px',margin:'auto'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Find Bus Routes\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSearch,style:{display:'flex',flexDirection:'column',gap:'10px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Source Stop\",value:source,onChange:handleSourceChange,autoComplete:\"off\"}),sourceSuggestions.length>0&&/*#__PURE__*/_jsx(\"ul\",{style:suggestionStyle,children:sourceSuggestions.map((stop,i)=>/*#__PURE__*/_jsx(\"li\",{onClick:()=>handleSelectSuggestion(stop,true),style:{cursor:'pointer',padding:'5px'},children:stop},i))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Destination Stop\",value:destination,onChange:handleDestinationChange,autoComplete:\"off\"}),destSuggestions.length>0&&/*#__PURE__*/_jsx(\"ul\",{style:suggestionStyle,children:destSuggestions.map((stop,i)=>/*#__PURE__*/_jsx(\"li\",{onClick:()=>handleSelectSuggestion(stop,false),style:{cursor:'pointer',padding:'5px'},children:stop},i))})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{display:'flex',justifyContent:'center',marginLeft:\"40px\",width:'90px'},children:\"Search\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red',marginTop:'10px'},children:error}),routes.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Matching Routes:\"}),/*#__PURE__*/_jsx(\"ul\",{children:routes.map((route,idx)=>/*#__PURE__*/_jsx(\"li\",{children:route},idx))})]})]});};const suggestionStyle={listStyleType:'none',padding:'5px',margin:'0',border:'1px solid #ccc',borderRadius:'4px',background:'#fff',maxHeight:'100px',overflowY:'auto',position:'absolute',zIndex:10};export default RouteFinder;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","RouteFinder","source","setSource","destination","setDestination","routes","setRoutes","error","setError","stops","setStops","sourceSuggestions","setSourceSuggestions","destSuggestions","setDestSuggestions","fetchStops","res","get","data","map","stop","stop_name","err","console","handleSearch","e","preventDefault","response","params","trim","length","_err$response","_err$response$data","handleSourceChange","value","target","filter","toLowerCase","includes","handleDestinationChange","handleSelectSuggestion","isSource","style","padding","maxWidth","margin","children","onSubmit","display","flexDirection","gap","type","placeholder","onChange","autoComplete","suggestionStyle","i","onClick","cursor","justifyContent","marginLeft","width","color","marginTop","route","idx","listStyleType","border","borderRadius","background","maxHeight","overflowY","position","zIndex"],"sources":["/home/meghana/bangalore-bus-route-finder/frontend/src/components/RouteFinder.js"],"sourcesContent":["\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nconst RouteFinder = () => {\n  const [source, setSource] = useState('');\n  const [destination, setDestination] = useState('');\n  const [routes, setRoutes] = useState([]);\n  const [error, setError] = useState('');\n  const [stops, setStops] = useState([]);\n  const [sourceSuggestions, setSourceSuggestions] = useState([]);\n  const [destSuggestions, setDestSuggestions] = useState([]);\n\n  useEffect(() => {\n    const fetchStops = async () => {\n      try {\n        const res = await axios.get('bmtcbusroutefinder-production.up.railway.app/stops');\n        setStops(res.data.map(stop => stop.stop_name));\n      } catch (err) {\n        console.error('Failed to fetch stops:', err);\n      }\n    };\n    fetchStops();\n  }, []);\n\n  const handleSearch = async (e) => {\n    e.preventDefault();\n    setRoutes([]);\n    setError('');\n\n    if (!source || !destination) {\n      setError('Please enter both source and destination.');\n      return; \n    }\n\n    try {\n      const response = await axios.get('bmtcbusroutefinder-production.up.railway.app/routes', {\n        params: {\n          source: source.trim(),\n          destination: destination.trim(),\n        },\n      });\n\n      if (response.data.routes.length === 0) {\n        setError('No routes found between the selected stops.U should take multiple stops');\n      } else {\n        setRoutes(response.data.routes);\n      }\n    } catch (err) {\n      if (err.response?.data?.error) {\n        setError(err.response.data.error);\n      } else {\n        setError('An error occurred while fetching routes.');\n      }\n    }\n  };\n\n  const handleSourceChange = (e) => {\n    const value = e.target.value;\n    setSource(value);\n    setSourceSuggestions(\n      stops.filter(stop => stop.toLowerCase().includes(value.toLowerCase()))\n    );\n  };\n\n  const handleDestinationChange = (e) => {\n    const value = e.target.value;\n    setDestination(value);\n    setDestSuggestions(\n      stops.filter(stop => stop.toLowerCase().includes(value.toLowerCase()))\n    );\n  };\n\n  const handleSelectSuggestion = (value, isSource) => {\n    if (isSource) {\n      setSource(value);\n      setSourceSuggestions([]);\n    } else {\n      setDestination(value);\n      setDestSuggestions([]);\n    }\n  };\n\n  return (\n    <div style={{ padding: '20px', maxWidth: '500px', margin: 'auto' }}>\n      <h2>Find Bus Routes</h2>\n      <form onSubmit={handleSearch} style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>\n        <div>\n          <input\n            type=\"text\"\n            placeholder=\"Source Stop\"\n            value={source}\n            onChange={handleSourceChange}\n            autoComplete=\"off\"\n          />\n          {sourceSuggestions.length > 0 && (\n            <ul style={suggestionStyle}>\n              {sourceSuggestions.map((stop, i) => (\n                <li key={i} onClick={() => handleSelectSuggestion(stop, true)}   style={{ cursor: 'pointer', padding: '5px' }}>\n                  {stop}\n                </li>\n              ))}\n            </ul>\n          )}\n        </div>\n\n        <div >\n          <input\n            type=\"text\"\n            placeholder=\"Destination Stop\"\n            value={destination}\n            onChange={handleDestinationChange}\n            autoComplete=\"off\"\n          />\n          {destSuggestions.length > 0 && (\n            <ul style={suggestionStyle}>\n              {destSuggestions.map((stop, i) => (\n                <li key={i} onClick={() => handleSelectSuggestion(stop, false)}   style={{ cursor: 'pointer', padding: '5px' }}> \n                  {stop}\n                </li>\n              ))}\n            </ul>\n          )}\n        </div>\n        <button\n  type=\"submit\"\n  style={{display:'flex',\n   justifyContent:'center',\n   marginLeft:\"40px\",\n    width: '90px',\n\n  }}\n>\n  Search\n</button>\n      </form>\n\n      {error && <p style={{ color: 'red', marginTop: '10px' }}>{error}</p>}\n\n      {routes.length > 0 && (\n        <div style={{ marginTop: '20px' }}>\n          <h3>Matching Routes:</h3>\n          <ul>\n            {routes.map((route, idx) => (\n              <li key={idx}>{route}</li>\n            ))}\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst suggestionStyle = {\n  listStyleType: 'none',\n  padding: '5px',\n  margin: '0',\n  border: '1px solid #ccc',\n  borderRadius: '4px',\n  background: '#fff',\n  maxHeight: '100px',\n  overflowY: 'auto',\n  position: 'absolute',\n  zIndex: 10,\n};\n\nexport default RouteFinder;\n\n"],"mappings":"AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxB,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACU,WAAW,CAAEC,cAAc,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACY,MAAM,CAAEC,SAAS,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACc,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACgB,KAAK,CAAEC,QAAQ,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACkB,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CAC9D,KAAM,CAACoB,eAAe,CAAEC,kBAAkB,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CAE1DC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqB,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAArB,KAAK,CAACsB,GAAG,CAAC,oDAAoD,CAAC,CACjFP,QAAQ,CAACM,GAAG,CAACE,IAAI,CAACC,GAAG,CAACC,IAAI,EAAIA,IAAI,CAACC,SAAS,CAAC,CAAC,CAChD,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAAChB,KAAK,CAAC,wBAAwB,CAAEe,GAAG,CAAC,CAC9C,CACF,CAAC,CACDP,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAS,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAChCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBpB,SAAS,CAAC,EAAE,CAAC,CACbE,QAAQ,CAAC,EAAE,CAAC,CAEZ,GAAI,CAACP,MAAM,EAAI,CAACE,WAAW,CAAE,CAC3BK,QAAQ,CAAC,2CAA2C,CAAC,CACrD,OACF,CAEA,GAAI,CACF,KAAM,CAAAmB,QAAQ,CAAG,KAAM,CAAAhC,KAAK,CAACsB,GAAG,CAAC,qDAAqD,CAAE,CACtFW,MAAM,CAAE,CACN3B,MAAM,CAAEA,MAAM,CAAC4B,IAAI,CAAC,CAAC,CACrB1B,WAAW,CAAEA,WAAW,CAAC0B,IAAI,CAAC,CAChC,CACF,CAAC,CAAC,CAEF,GAAIF,QAAQ,CAACT,IAAI,CAACb,MAAM,CAACyB,MAAM,GAAK,CAAC,CAAE,CACrCtB,QAAQ,CAAC,yEAAyE,CAAC,CACrF,CAAC,IAAM,CACLF,SAAS,CAACqB,QAAQ,CAACT,IAAI,CAACb,MAAM,CAAC,CACjC,CACF,CAAE,MAAOiB,GAAG,CAAE,KAAAS,aAAA,CAAAC,kBAAA,CACZ,IAAAD,aAAA,CAAIT,GAAG,CAACK,QAAQ,UAAAI,aAAA,YAAAC,kBAAA,CAAZD,aAAA,CAAcb,IAAI,UAAAc,kBAAA,WAAlBA,kBAAA,CAAoBzB,KAAK,CAAE,CAC7BC,QAAQ,CAACc,GAAG,CAACK,QAAQ,CAACT,IAAI,CAACX,KAAK,CAAC,CACnC,CAAC,IAAM,CACLC,QAAQ,CAAC,0CAA0C,CAAC,CACtD,CACF,CACF,CAAC,CAED,KAAM,CAAAyB,kBAAkB,CAAIR,CAAC,EAAK,CAChC,KAAM,CAAAS,KAAK,CAAGT,CAAC,CAACU,MAAM,CAACD,KAAK,CAC5BhC,SAAS,CAACgC,KAAK,CAAC,CAChBtB,oBAAoB,CAClBH,KAAK,CAAC2B,MAAM,CAAChB,IAAI,EAAIA,IAAI,CAACiB,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACJ,KAAK,CAACG,WAAW,CAAC,CAAC,CAAC,CACvE,CAAC,CACH,CAAC,CAED,KAAM,CAAAE,uBAAuB,CAAId,CAAC,EAAK,CACrC,KAAM,CAAAS,KAAK,CAAGT,CAAC,CAACU,MAAM,CAACD,KAAK,CAC5B9B,cAAc,CAAC8B,KAAK,CAAC,CACrBpB,kBAAkB,CAChBL,KAAK,CAAC2B,MAAM,CAAChB,IAAI,EAAIA,IAAI,CAACiB,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACJ,KAAK,CAACG,WAAW,CAAC,CAAC,CAAC,CACvE,CAAC,CACH,CAAC,CAED,KAAM,CAAAG,sBAAsB,CAAGA,CAACN,KAAK,CAAEO,QAAQ,GAAK,CAClD,GAAIA,QAAQ,CAAE,CACZvC,SAAS,CAACgC,KAAK,CAAC,CAChBtB,oBAAoB,CAAC,EAAE,CAAC,CAC1B,CAAC,IAAM,CACLR,cAAc,CAAC8B,KAAK,CAAC,CACrBpB,kBAAkB,CAAC,EAAE,CAAC,CACxB,CACF,CAAC,CAED,mBACEf,KAAA,QAAK2C,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,QAAQ,CAAE,OAAO,CAAEC,MAAM,CAAE,MAAO,CAAE,CAAAC,QAAA,eACjEjD,IAAA,OAAAiD,QAAA,CAAI,iBAAe,CAAI,CAAC,cACxB/C,KAAA,SAAMgD,QAAQ,CAAEvB,YAAa,CAACkB,KAAK,CAAE,CAAEM,OAAO,CAAE,MAAM,CAAEC,aAAa,CAAE,QAAQ,CAAEC,GAAG,CAAE,MAAO,CAAE,CAAAJ,QAAA,eAC7F/C,KAAA,QAAA+C,QAAA,eACEjD,IAAA,UACEsD,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,aAAa,CACzBlB,KAAK,CAAEjC,MAAO,CACdoD,QAAQ,CAAEpB,kBAAmB,CAC7BqB,YAAY,CAAC,KAAK,CACnB,CAAC,CACD3C,iBAAiB,CAACmB,MAAM,CAAG,CAAC,eAC3BjC,IAAA,OAAI6C,KAAK,CAAEa,eAAgB,CAAAT,QAAA,CACxBnC,iBAAiB,CAACQ,GAAG,CAAC,CAACC,IAAI,CAAEoC,CAAC,gBAC7B3D,IAAA,OAAY4D,OAAO,CAAEA,CAAA,GAAMjB,sBAAsB,CAACpB,IAAI,CAAE,IAAI,CAAE,CAAGsB,KAAK,CAAE,CAAEgB,MAAM,CAAE,SAAS,CAAEf,OAAO,CAAE,KAAM,CAAE,CAAAG,QAAA,CAC3G1B,IAAI,EADEoC,CAEL,CACL,CAAC,CACA,CACL,EACE,CAAC,cAENzD,KAAA,QAAA+C,QAAA,eACEjD,IAAA,UACEsD,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,kBAAkB,CAC9BlB,KAAK,CAAE/B,WAAY,CACnBkD,QAAQ,CAAEd,uBAAwB,CAClCe,YAAY,CAAC,KAAK,CACnB,CAAC,CACDzC,eAAe,CAACiB,MAAM,CAAG,CAAC,eACzBjC,IAAA,OAAI6C,KAAK,CAAEa,eAAgB,CAAAT,QAAA,CACxBjC,eAAe,CAACM,GAAG,CAAC,CAACC,IAAI,CAAEoC,CAAC,gBAC3B3D,IAAA,OAAY4D,OAAO,CAAEA,CAAA,GAAMjB,sBAAsB,CAACpB,IAAI,CAAE,KAAK,CAAE,CAAGsB,KAAK,CAAE,CAAEgB,MAAM,CAAE,SAAS,CAAEf,OAAO,CAAE,KAAM,CAAE,CAAAG,QAAA,CAC5G1B,IAAI,EADEoC,CAEL,CACL,CAAC,CACA,CACL,EACE,CAAC,cACN3D,IAAA,WACNsD,IAAI,CAAC,QAAQ,CACbT,KAAK,CAAE,CAACM,OAAO,CAAC,MAAM,CACrBW,cAAc,CAAC,QAAQ,CACvBC,UAAU,CAAC,MAAM,CAChBC,KAAK,CAAE,MAET,CAAE,CAAAf,QAAA,CACH,QAED,CAAQ,CAAC,EACG,CAAC,CAENvC,KAAK,eAAIV,IAAA,MAAG6C,KAAK,CAAE,CAAEoB,KAAK,CAAE,KAAK,CAAEC,SAAS,CAAE,MAAO,CAAE,CAAAjB,QAAA,CAAEvC,KAAK,CAAI,CAAC,CAEnEF,MAAM,CAACyB,MAAM,CAAG,CAAC,eAChB/B,KAAA,QAAK2C,KAAK,CAAE,CAAEqB,SAAS,CAAE,MAAO,CAAE,CAAAjB,QAAA,eAChCjD,IAAA,OAAAiD,QAAA,CAAI,kBAAgB,CAAI,CAAC,cACzBjD,IAAA,OAAAiD,QAAA,CACGzC,MAAM,CAACc,GAAG,CAAC,CAAC6C,KAAK,CAAEC,GAAG,gBACrBpE,IAAA,OAAAiD,QAAA,CAAekB,KAAK,EAAXC,GAAgB,CAC1B,CAAC,CACA,CAAC,EACF,CACN,EACE,CAAC,CAEV,CAAC,CAED,KAAM,CAAAV,eAAe,CAAG,CACtBW,aAAa,CAAE,MAAM,CACrBvB,OAAO,CAAE,KAAK,CACdE,MAAM,CAAE,GAAG,CACXsB,MAAM,CAAE,gBAAgB,CACxBC,YAAY,CAAE,KAAK,CACnBC,UAAU,CAAE,MAAM,CAClBC,SAAS,CAAE,OAAO,CAClBC,SAAS,CAAE,MAAM,CACjBC,QAAQ,CAAE,UAAU,CACpBC,MAAM,CAAE,EACV,CAAC,CAED,cAAe,CAAAzE,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}